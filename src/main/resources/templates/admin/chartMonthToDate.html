<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset=utf-8>
    <meta http-equiv=X-UA-Compatible content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Font Awesome -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
<!-- Google Fonts Roboto -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
<!-- Bootstrap core CSS -->
<link rel="stylesheet" href="../css/bootstrap.css">
<link rel="stylesheet" href="../css/dashboard.css">
<link rel=icon href=../img/favicon.ico>
<title>CSCParts - Dashboard</title>

  </head>
  <body>
    <header>
      <!-- Bootstrap NavBar -->
  <nav class="navbar navbar-expand-md navbar-light" style="background-color: black;">
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
      </button>
      <a class="navbar-brand" href="#">
          <a class="navbar-brand" th:href="@{/admin/home}"><img src="../img/logo.c90ecd5a.png" height="30" class="d-inline-block align-top" alt="OneSysConsulting"></a>
          <span class="menu-collapsed"></span>
      </a>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav ml-auto">
              <li class="nav-item active">
                   <a class="nav-link text-info"  th:href="@{/admin/home}"><i class="fas fa-home"></i>Home</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link text-info" href="/logout"><i class="fas fa-sign-out-alt"></i>Logout</a>
              </li>
              <!-- This menu is hidden in bigger devices with d-sm-none. 
             The sidebar isn't proper for smaller screens imo, so this dropdown menu can keep all the useful sidebar itens exclusively for smaller screens  -->
              <li class="nav-item dropdown d-sm-block d-md-none">
                  <a class="nav-link dropdown-toggle" href="#" id="smallerscreenmenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Menu </a>
                  <div class="dropdown-menu" aria-labelledby="smallerscreenmenu">
                      <a class="dropdown-item"  th:href="@{/admin/home}">Home</a>
                      <a class="dropdown-item"  th:href="@{/admin/dashboard}">Dashboard</a>
                  </div>
              </li><!-- Smaller devices menu END -->
          </ul>
      </div>
  </nav><!-- NavBar END -->
  </header>
  <div class="row" id="body-row">
        <div id="sidebar-container" class="sidebar-expanded d-none d-md-block">
          <!-- d-* hiddens the Sidebar in smaller devices. Its itens can be kept on the Navbar 'Menu' -->
          <!-- Bootstrap List Group -->
          <ul class="list-group">
              <!-- Separator with title -->
              <li class="list-group-item sidebar-separator-title text-muted d-flex align-items-center menu-collapsed">
                  <small>MAIN MENU</small>
              </li>
              <!-- /END Separator -->
              <!-- Menu with submenu -->
              <a th:href="@{/admin/home}" class="bg-dark list-group-item list-group-item-action">
                  <div class="d-flex w-100 justify-content-start align-items-center">
                      <span class="fas fa-home fa-fw mr-3"></span>
                      <span class="menu-collapsed">Home</span>
                  </div>
              </a>
              <a href="#submenu1" data-toggle="collapse" aria-expanded="false" class="bg-dark list-group-item list-group-item-action flex-column align-items-start">
                  <div class="d-flex w-100 justify-content-start align-items-center">
                      <span class="fas fa-tachometer-alt fa-fw mr-3"></span>
                      <span class="menu-collapsed">Dashboard</span>
                      <span class="submenu-icon ml-auto"></span>
                  </div>
              </a>
              <!-- Submenu content -->
              <div id='submenu1' class="sidebar-submenu">
                  <a th:href="@{/admin/chartToday}" class="list-group-item list-group-item-action sidebar-separator-title text-info">
                      <span class="menu-collapsed">Today</span>
                  </a>
                  <a th:href="@{/admin/chartMonthToDate}" class="list-group-item list-group-item-action bg-dark text-white">
                      <span class="menu-collapsed">This Month</span>
                  </a>
                  <a href="#" class="list-group-item list-group-item-action bg-dark text-white">
                      <span class="menu-collapsed">Last Month</span>
                  </a>
                  <a href="#" class="list-group-item list-group-item-action bg-dark text-white">
                      <span class="menu-collapsed">Last 3 Months</span>
                  </a>
              </div>
              
              
              <!-- /END Separator -->
              
              <a href="#top" data-toggle="sidebar-colapse" class="bg-dark list-group-item list-group-item-action d-flex align-items-center">
                  <div class="d-flex w-100 justify-content-start align-items-center">
                      <span id="collapse-icon" class="fas fa-2x mr-3"></span>
                      <span id="collapse-text" class="menu-collapsed">Collapse</span>
                  </div>
              </a>
          </ul><!-- List Group END-->
      </div><!-- sidebar-container END -->
      <div>
        <section>
          <div>
              <div class="row">
                  <div class="col-md-12">
        <section class="text-left px-2 mt-2">
          <span class="h3">DASHBOARD</span><span class="h6" th:text="${'Quotes , Orders & Invoices -  This Month ('+thisMonth+')'}"></span>
        </section>
        <div class="album py-3 px-2 bg-light">
          <div class="row">
              <div class="col-md-4">
                <div class="card mb-4 shadow-sm">
                  <div class="card-header h3">Quotes</div>
                  <div class="row no-gutters">
                    <div class="col-md-5" id="guage_div_quotes" ></div>
                    <div class="col-md-7 card-body" style="padding-top: 20px;">
                      <button type="button" class="btn btn-primary btn-sm" th:title="${'Total : $' + salesQuotesMTD}"><span th:text="${'Total : $ ' + salesQuotesMTD}"></span></button>
                      <button type="button" class="btn btn-success btn-sm" th:title="${'Target : $' + salesTargetMTD}"><span th:text="${'Target : $ ' + salesTargetMTD}"></span></button>
                      <div class="table-responsive mt-2 ml-2 mr-2 small">
                      <table class="table table-sm table-bordered">
                        <thead>
                          <tr>
                            <th scope="col"> </th>
                            <th scope="col">Actual</th>
                            <th scope="col">Target</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <th scope="row">Qty</th>
                            <td th:text="${salesQuotesQtyMTD}"></td>
                            <td>50</td>
                         </tr>
                          <tr>
                            <th scope="row">Avg $</th>
                            <td>910</td>
                            <td>1000</td>
                          </tr>
                          <tr>
                            <th scope="row">Avg GP %</th>
                            <td>45</td>
                            <td>65</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    </div>
                    </div>
                    <div id="graph_div_quotes" style="width: 500px; height: 500px;"></div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card mb-4 shadow-sm">
                  <div class="card-header h3">Orders</div>
                  <div class="row no-gutters">
                    <div class="col-md-5" id="guage_div_orders" ></div>
                    <div class="col-md-7 card-body" style="padding-top: 20px;">
                      <button type="button" class="btn btn-warning btn-sm" th:title="${'Total : $' + salesOrderedMTD}"><span th:text="${'Total : $ ' + salesOrderedMTD}"></span></button>
                      <button type="button" class="btn btn-success btn-sm" th:title="${'Target : $' + salesTargetMTD}"><span th:text="${'Target : $ ' + salesTargetMTD}"></span></button>
                      <div class="table-responsive mt-2 ml-2 mr-2 small">
                      <table class="table table-sm table-bordered">
                        <thead>
                          <tr>
                            <th scope="col"> </th>
                            <th scope="col">Actual</th>
                            <th scope="col">Target</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <th scope="row">Qty</th>
                            <td th:text="${salesOrderedQtyMTD}"></td>
                            <td>50</td>
                         </tr>
                          <tr>
                            <th scope="row">Avg $</th>
                            <td>910</td>
                            <td>1000</td>
                          </tr>
                          <tr>
                            <th scope="row">Avg GP %</th>
                            <td>45</td>
                            <td>65</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    </div>
                    </div>
                    <div id="graph_div_orders" style="width: 500px; height: 500px;"></div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card mb-4 shadow-sm">
                  <div class="card-header h3">Invoices</div>
                  <div class="row no-gutters">
                    <div class="col-md-5" id="guage_div_invoices" ></div>
                    <div class="col-md-7 card-body" style="padding-top: 20px;">
                      <button type="button" class="btn btn-danger btn-sm" th:title="${'Total : $' + salesInvoicedMTD}"><span th:text="${'Total : $ ' + salesInvoicedMTD}"></span></button>
                      <button type="button" class="btn btn-success btn-sm" th:title="${'Target : $' + salesTargetMTD}"><span th:text="${'Target : $ ' + salesTargetMTD}"></span></button>
                      <div class="table-responsive mt-2 ml-2 mr-2 small">
                      <table class="table table-sm table-bordered">
                        <thead>
                          <tr>
                            <th scope="col"> </th>
                            <th scope="col">Actual</th>
                            <th scope="col">Target</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <th scope="row">Qty</th>
                            <td th:text="${salesInvoicedQtyMTD}"></td>
                            <td>50</td>
                         </tr>
                          <tr>
                            <th scope="row">Avg $</th>
                            <td>910</td>
                            <td>1000</td>
                          </tr>
                          <tr>
                            <th scope="row">Avg GP %</th>
                            <td>45</td>
                            <td>65</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    </div>
                    </div>
                    <div id="graph_div_invoices" style="width: 500px; height: 500px;"></div>
                </div>
              </div>
              </div>
              </div>
              </div>
              </div>
            </div>
         </section>
        </div>
        </div><!-- body-row END -->

        <!-- Footer -->
<footer class="footer mt-auto py-3">
  <div class="container">
    <p>&copy; 2020 <a href="http://onesysconsulting.com.au/">OneSysConsulting</a>. All rights reserved.</a>.</p>
  </div>
</footer>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <!-- jQuery -->
<script type="text/javascript" src="../js/jquery.js"></script>
<!-- Bootstrap tooltips -->
<script type="text/javascript" src="../js/popper.js"></script>
<!-- Bootstrap core JavaScript -->
<script type="text/javascript" src="../js/bootstrap.js"></script>
<!-- Google chart -->
<script type="text/javascript" src="../js/loader.js"></script>
<script th:inline="javascript">
  $('#body-row .collapse').collapse('hide'); 

// Collapse/Expand icon
$('#collapse-icon').addClass('fa-angle-double-left'); 

// Collapse click
$('[data-toggle=sidebar-colapse]').click(function() {
    SidebarCollapse();
});

function SidebarCollapse () {
    $('.menu-collapsed').toggleClass('d-none');
    $('.sidebar-submenu').toggleClass('d-none');
    $('.submenu-icon').toggleClass('d-none');
    $('#sidebar-container').toggleClass('sidebar-expanded sidebar-collapsed');
    
    // Treating d-flex/d-none on separators with title
    var SeparatorTitle = $('.sidebar-separator-title');
    if ( SeparatorTitle.hasClass('d-flex') ) {
        SeparatorTitle.removeClass('d-flex');
    } else {
        SeparatorTitle.addClass('d-flex');
    }
    
    // Collapse/Expand icon
    $('#collapse-icon').toggleClass('fa-angle-double-left fa-angle-double-right');
}
  /*<![CDATA[*/

  var salesOrderedMTD = /*[[${salesOrderedMTD}]]*/ '0';
  var salesInvoicedMTD = /*[[${salesInvoicedMTD}]]*/ '0';
  var salesQuotesMTD = /*[[${salesQuotesMTD}]]*/ '0';
  var salesTargetMTD = /*[[${salesTargetMTD}]]*/ '0';
  console.log('salesOrderedMTD-->'+salesOrderedMTD);
  console.log('salesInvoicedMTD-->'+salesInvoicedMTD);
  console.log('salesQuotesMTD-->'+salesQuotesMTD);
  console.log('salesTargetMTD-->'+salesTargetMTD);

  var targetAchievedOrders = /*[[${targetAchievedOrders}]]*/ 0;
  var targetAchievedQuotes = /*[[${targetAchievedQuotes}]]*/ 0;
  var targetAchievedInvoices = /*[[${targetAchievedInvoices}]]*/ 0;
  console.log('targetAchievedOrders-->'+targetAchievedOrders);
  console.log('targetAchievedQuotes-->'+targetAchievedQuotes);
  console.log('targetAchievedInvoices-->'+targetAchievedInvoices);
  

/*]]>*/
  google.charts.load('current', {packages: ['corechart','gauge','bar']});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
    // Define the chart to be drawn.
    var dataQuotes = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Quotes', {v:targetAchievedQuotes,f:targetAchievedQuotes+'%'}]
        ]);

    var optionsQuotes = {
          width: 700,
          height: 220,
          redColor:'#0069D9',
          redFrom: 0,
          redTo: targetAchievedQuotes,
          greenFrom:targetAchievedQuotes,
          greenTo: 100,
          minorTicks: 5
        };

        var chartQuotes = new google.visualization.Gauge(document.getElementById('guage_div_quotes'));

        chartQuotes.draw(dataQuotes, optionsQuotes);
        // Define the chart to be drawn.
    var dataOrders = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Orders', {v:targetAchievedOrders,f:targetAchievedOrders+'%'}]
        ]);

    var optionsOrders = {
          width: 700,
          height: 220,
          yellowFrom: 0,
          yellowTo: targetAchievedOrders,
          greenFrom:targetAchievedOrders,
          greenTo: 100,
          minorTicks: 5
        };

        var chartOrders = new google.visualization.Gauge(document.getElementById('guage_div_orders'));

        chartOrders.draw(dataOrders, optionsOrders);
            // Define the chart to be drawn.
    var dataInvoices = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Invoices', {v:targetAchievedInvoices,f:targetAchievedInvoices+'%'}]
        ]);

    var optionsInvoices = {
          width: 700,
          height: 220,
          redFrom: 0,
          redTo: targetAchievedInvoices,
          greenFrom:targetAchievedInvoices,
          greenTo: 100,
          minorTicks: 5
        };

        var chartInvoices = new google.visualization.Gauge(document.getElementById('guage_div_invoices'));

        chartInvoices.draw(dataInvoices, optionsInvoices);

       
        var dataGraphInvoices = google.visualization.arrayToDataTable([
          ['Date', 'Sales', 'Target'],
          ['01-June', 8000, 9000],
          ['02-June', 24000, 20000],
          ['03-June', 30000, 29000],
          ['04-June', 50000, 55000],
          ['05-June', 60000, 50000]
        ]);

        var dataGraphInvoicesOptions = {
          width: 500,
          title: 'Sales vs Target',
         trendlines: {
            0: {
              type: 'linear',
              labelInLegend: 'Sales line',
              visibleInLegend: true,
              color: 'green'
            },
            1: {
              type: 'linear',
              labelInLegend: 'Target line',
              visibleInLegend: true,
              color: 'green'
            }
          }
        };
        var graphInvoices = new google.visualization.AreaChart(graph_div_invoices);
        graphInvoices.draw(dataGraphInvoices, dataGraphInvoicesOptions);
          
        var dataGraphOrders = google.visualization.arrayToDataTable([
          ['Date', 'Sales', 'Target'],
          ['01-June', 8000, 9000],
          ['02-June', 24000, 20000],
          ['03-June', 30000, 29000],
          ['04-June', 50000, 55000],
          ['05-June', 60000, 50000]
        ]);

        var dataGraphOrdersOptions = {
          width: 500,
          title: 'Sales vs Target',
         trendlines: {
            0: {
              type: 'linear',
              labelInLegend: 'Sales line',
              visibleInLegend: true,
              color: 'green'
            },
            1: {
              type: 'linear',
              labelInLegend: 'Target line',
              visibleInLegend: true,
              color: 'green'
            }
          }
        };
        var graphOrders = new google.visualization.AreaChart(graph_div_orders);
        graphOrders.draw(dataGraphOrders, dataGraphOrdersOptions);
            
        var dataGraphQuotes = google.visualization.arrayToDataTable([
          ['Date', 'Sales', 'Target'],
          ['01-June', 8000, 9000],
          ['02-June', 24000, 20000],
          ['03-June', 30000, 29000],
          ['04-June', 50000, 55000],
          ['05-June', 60000, 50000]
        ]);

        var dataGraphQuotesOptions = {
          width: 500,
          title: 'Sales vs Target',
         trendlines: {
            0: {
              type: 'linear',
              labelInLegend: 'Sales line',
              visibleInLegend: true,
              color: 'green'
            },
            1: {
              type: 'linear',
              labelInLegend: 'Target line',
              visibleInLegend: true,
              color: 'green'
            }
          }
        };
        var graphQuotes = new google.visualization.AreaChart(graph_div_quotes);
        graphQuotes.draw(dataGraphQuotes, dataGraphQuotesOptions);
  }
  
    </script>
</script>
  </body>
    </html>